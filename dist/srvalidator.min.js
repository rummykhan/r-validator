!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.srvalidator=t()}(this,function(){"use strict";var e=function(){this.errorMessagesBag={}};return e.prototype.validateAll=function(e){var t=this;return e=e||this.values,new Promise(function(a,s){t.refresh(e),0===Object.keys(t.errorMessagesBag).length?a({success:!0,data:e}):s({success:!1,data:e,errors:t.errorMessagesBag})})},e.prototype.validate=function(e,t,a,s){return this.init(e,t,a,s),this.refresh(e)},e.prototype.init=function(e,t,a,s){this.values=e||{},this.rules=t||{},this.alias=a||{},this.messages=s||[]},e.prototype.refresh=function(t){var a=this;t=t||this.values;for(var s in t)if(a.values.hasOwnProperty(s)){var r=t[s],i=e.getRules(s,a.rules);if(!i)return;a.validateSingleValue(s,r,i.split("|"),a.alias[s])}return this.passes()},e.prototype.passes=function(){return 0===Object.keys(this.errorMessagesBag).length},e.prototype.isValid=function(){return this.passes()},e.prototype.getMessages=function(){return this.errorMessagesBag},e.prototype.validateSingleValue=function(e,t,a,s,r){var i=this;if(void 0===r&&(r=[]),!a)throw new Error("Rules are not present.");a.forEach(function(a){i.validateSingleRule(e,t,a,s)})},e.prototype.validateSingleRule=function(t,a,s,r){s=e.toClassRule(s);var i=null;e.hasParameters(s)&&(i=e.getParameters(s),s=e.separateRuleFromParameter(s));try{this[s](t,a,i,r)}catch(e){throw new Error(s+" is not a Validator.")}},e.prototype.validateRequired=function(t,a,s,r){void 0===s&&(s=null);var i=(r=e.assertAlias(t,r))+" is required.";Number.isInteger(a)||(a?this.removeValidationMessage(t,i):this.addValidationMessages(t,i))},e.prototype.validateInt=function(t,a,s,r){void 0===s&&(s=null),r=e.assertAlias(t,r),a=parseInt(a,10);var i=r+" should be a number.";Number.isInteger(a)?this.removeValidationMessage(t,i):this.addValidationMessages(t,i)},e.prototype.validateEmail=function(t,a,s,r){void 0===s&&(s=null),r=e.assertAlias(t,r);var i="Please enter a valid email address.";/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@(([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)?this.removeValidationMessage(t,i):this.addValidationMessages(t,i)},e.prototype.validateArray=function(t,a,s,r){void 0===s&&(s=null);var i=(r=e.assertAlias(t,r))+" is not a valid array.";a&&a.constructor&&a.constructor===Array?this.removeValidationMessage(t,i):this.addValidationMessages(t,i)},e.prototype.validateString=function(t,a,s,r){void 0===s&&(s=null);var i=(r=e.assertAlias(t,r))+" is not a valid string.";"string"!=typeof a?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateGte=function(t,a,s,r){if(r=e.assertAlias(t,r),a=parseInt(a,10),s=parseInt(s,10),isNaN(s))throw new Error(s+" is not a valid integer.");var i=r+" must be greater than "+s+".";a<s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateLte=function(t,a,s,r){if(r=e.assertAlias(t,r),a=parseInt(a,10),s=parseInt(s,10),isNaN(s))throw new Error(s+" is not a valid integer.");var i=r+" must be less than "+s+".";a>s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateMin=function(e,t,a,s){if(void 0!==t)return"string"==typeof t?this.validateStringMin(e,t,a,s):"number"==typeof t?this.validateNumberMin(e,t,a,s):t&&t.constructor&&t.constructor===Array?this.validateArrayMin(e,t,a,s):void 0},e.prototype.validateStringMin=function(t,a,s,r){var i=(r=e.assertAlias(t,r))+" cannot be less than "+s+" characters.";a.length<s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateNumberMin=function(t,a,s,r){var i=(r=e.assertAlias(t,r))+" value cannot be less than "+s;a<s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateArrayMin=function(t,a,s,r){var i=(r=e.assertAlias(t,r))+" length cannot be less than "+s;a.length<s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateMax=function(e,t,a,s){if(void 0!==t)return"string"==typeof t?this.validateStringMax(e,t,a,s):"number"==typeof t?this.validateNumberMax(e,t,a,s):t&&t.constructor&&t.constructor===Array?this.validateArrayMax(e,t,a,s):void 0},e.prototype.validateStringMax=function(t,a,s,r){var i=(r=e.assertAlias(t,r))+" cannot be more than "+s+" characters.";a.length>s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateNumberMax=function(t,a,s,r){var i=(r=e.assertAlias(t,r))+" value cannot be greater than "+s;a>s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.validateArrayMax=function(t,a,s,r){var i=(r=e.assertAlias(t,r))+" length cannot be more than "+s;a.length>s?this.addValidationMessages(t,i):this.removeValidationMessage(t,i)},e.prototype.removeValidationMessage=function(e,t){var a=this.getErrors(e),s=a.indexOf(t);s>-1&&a.splice(s,1),0===a.length?delete this.errorMessagesBag[e]:this.errorMessagesBag[e]=a},e.prototype.addValidationMessages=function(e,t){var a=this.getErrors(e);a.includes(t)||a.push(t),this.errorMessagesBag[e]=a},e.prototype.getErrors=function(e){var t=[];return this.errorMessagesBag[e]&&(t=this.errorMessagesBag[e]),t},e.prototype.first=function(t){var a=this.getErrors(t);return a.length>0?e.ucfirst(a[0]):null},e.prototype.hasErrors=function(e){return this.getErrors(e).length>0},e.ucfirst=function(e){return(e+"").charAt(0).toUpperCase()+(e+"").slice(1)},e.toClassRule=function(t){return"validate"+e.ucfirst(t)},e.hasParameters=function(e){return e.split(":").length>1},e.getParameters=function(e){var t=e.split(":")[1].split(",");if(0===t.length)throw new Error("No parameter specified.");return 1===t.length?t[0]:t},e.separateRuleFromParameter=function(e){return e.split(":")[0]},e.getRules=function(e,t){return t[e]?t[e]:null},e.assertAlias=function(e,t){return t||e},e});